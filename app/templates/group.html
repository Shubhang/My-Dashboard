{% extends "base.html" %}

{% block content %}

<div id='block-div' style='text-align: center;'>
    <h1>{{ group.name }}</h1>
    <br>
    <hr>
    <br>
    {% if group.description %}
        <p>{{ group.description }}</p>
        <hr>
        <br>
    {% endif %}
    {% if in_production %}
    <p>You can share this group with others by sharing this link: <a href="www.nittanydatalabs.org{{ url_for(request.endpoint, group_id=group.id) }}">www.nittanydatalabs.org{{ url_for(request.endpoint, group_id=group.id) }}</a></p>
    {% else %}
    <p>You can share this group with others by sharing this link: <a href="http://127.0.0.1:5000{{ url_for(request.endpoint, group_id=group.id) }}">http://127.0.0.1:5000{{ url_for(request.endpoint, group_id=group.id) }}</a></p>
    {% endif %}
    <!-- LIST OF COMPANIES IN GROUP -->
    <br></br>
    <div class='card company-list'>
        <div class='container'>
            <h4>Companies in this group</h4>
            <br>
                {% if group_companies == [] %}
                    <p style='color: black;'>There are currently no companies in this group</p>
                {% else %}
                    {% for company in group_companies: %}
                        <div id='generate-dashboard' style='float: left; margin-right: 4px;'>
                            <form action="{{ url_for('dashboard') }}" method="post">
                                <input class="form-control mr-sm-2" type="hidden" value="{{company}}" name="company">
                                <button type="submit" class="btn btn-dark" onclick="$('#loading').show(); $('#block-div').hide();">{{company}}</button>
                            </form>
                        </div>
                        <div id='remove-company-from-group' style='float: left; '>
                            <form  action="{{ url_for('groups', group_id=group.id) }}" method="post">
                                <input type="hidden" value="{{company}}" name="delete-company">
                                <button type="submit" class="btn btn-danger">&#128465;</button>
                            </form>
                        </div>
                    {% endfor %}
                {% endif %}    
        </div>
    </div>

    <!-- ADD COMPANY BUTTON -->
    <div class='card company-list' style='margin-top: 5%; width: 35%; padding:2px'>
        <div class='container' style='text-align: center; padding: 5px;'>
        <form id='add-company-to-group' action="{{ url_for('groups', group_id=group.id) }}" method="post">
            <input class="form-control mr-sm-2 txtbox" type="text" value="" placeholder="new company name" name="new-company" />
            <button type="submit" class="btn btn-success btncls" value="Submit">&#43; Add company</button>
        </form>
        </div>
    </div>

    <br>

    <!-- REMOVE GROUP BUTTON-->
    <div id='delete-group'>
        <form  action="{{ url_for('remove_group', group_id=group.id) }}" method="post">
            <button type="submit" class="btn btn-danger" onclick="return confirm('Are you sure you want to delete this group?')">Delete group &#128465;</button>
        </form>
    </div>
</div>

<!-- Loading dashboard graphic-->
<div id="loading" style="display:none; text-align: center;">
    <br style="line-height:22px;"></br>
    <img id="loading-image" style='width: 15%; height: 30%;' src="{{ url_for('static', filename='loadingDash.gif') }}" alt='Dashboard loading...'>
    <h3 style="text-align: center; padding-top: 10px;">Loading...</h3>
</div>

<style>
    .txtbox{
            float: left;
            height: 40px;
            width: 250px;
            margin-right: 2px;
        }

    .btncls{
        float: left;
        height: 40px;
        width: 150px;
    }
</style>

{% endblock %}